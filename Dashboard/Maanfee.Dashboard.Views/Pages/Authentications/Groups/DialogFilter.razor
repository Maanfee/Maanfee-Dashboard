@inherits _BaseView

<MaanfeeDashboardDialog @ref="MDialog" IsDialogLoaded="@IsLoaded" Title="@DashboardResource.StringSearch"
                        OnKeyDown="OnKeyDownAsync" DialogContentType="@(this.GetType())">
    <MaanfeeDashboardDialogHeaderAction>
        <MudTooltip Text="@DashboardResource.StringSearch" Color="Color.Tertiary" Arrow>
            <MudIconButton OnClick="Search" Icon="@Icons.Material.Filled.ManageSearch" Color="Color.Tertiary" />
        </MudTooltip>
    </MaanfeeDashboardDialogHeaderAction>
    <MaanfeeDashboardDialogContent>
        <MudGrid>
            <MudItem md="12">
                <MudTextField @bind-Value="FilterViewModel.Title" Variant="Variant.Outlined"
                              Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Title" Clearable
                              For="@(() => FilterViewModel.Title)"
                              Label="@DashboardResource.StringTitle" />
            </MudItem>
        </MudGrid>
    </MaanfeeDashboardDialogContent>
</MaanfeeDashboardDialog>

@code {

    private MaanfeeDashboardDialog MDialog = new();

    // *****************************************************

    protected override Task OnInitializedAsync()
    {
        IsLoaded = true;
        return base.OnInitializedAsync();
    }

    private async Task Search()
    {
        await Task.Delay(100);

        MDialog.Close(DialogResult.Ok(FilterViewModel));
    }

    [Parameter]
    public FilterGroupViewModel FilterViewModel { get; set; } = new();

    #region - Key Events -

    private async Task OnKeyDownAsync(KeyboardEventArgs args)
    {
        switch (args.Key)
        {
            case "Enter":
            case "NumpadEnter":
                await Search();
                break;
        }
    }

    #endregion

}
